import { useSupabaseUser } from "../composables/useSupabaseUser.mjs";
import { redirectToLogin } from "../utils/redirect.mjs";
import { defineNuxtPlugin, addRouteMiddleware } from "#imports";
export default defineNuxtPlugin(() => {
  addRouteMiddleware("global-auth", (to) => {
    const user = useSupabaseUser();
    if (!user.value) {
      return redirectToLogin(to.path);
    }
  }, { global: true });
});
