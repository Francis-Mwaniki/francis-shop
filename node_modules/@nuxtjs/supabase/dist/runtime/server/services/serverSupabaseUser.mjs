import { serverSupabaseClient } from "../services/serverSupabaseClient.mjs";
export const serverSupabaseUser = async (event) => {
  const client = serverSupabaseClient(event);
  if (!event.context._token) {
    return null;
  }
  const { data: { user: supabaseUser }, error } = await client.auth.getUser(event.context._token);
  event.context._user = error ? null : supabaseUser;
  return event.context._user;
};
